{
    "sourceFile": "pages/subscribe/index.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1736741923669,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1736741923669,
            "name": "Commit-0",
            "content": "import { Button } from 'primereact/button';\r\nimport React, { useState,useEffect  } from 'react';\r\nimport Cookies from 'js-cookie';\r\nimport axios from 'axios';\r\nimport Link from 'next/link';\r\n\r\nconst BlocksDemo = () => {\r\n    \r\n    const [packages, setPackages] = useState([]);\r\n    const getTokenFromCookie = () => {\r\n        const token = Cookies.get('token'); // <-- Replace 'yourCookieName' with the actual name of your cookie\r\n\r\n        return token;\r\n    };\r\n\r\n\r\n    const handlePayment = async (code) => {\r\n        const token = getTokenFromCookie();\r\n\r\n        const response = await axios.get(`http://192.168.14.248:8080/api/v1/package/${code}`, {\r\n          headers: {\r\n            Authorization: `Bearer ${token}`\r\n        }\r\n    });\r\n        \r\n    const data = response.data;\r\n        // const data = await response.json();\r\n        // window.snap.pay(data.snap.token);\r\n        console.log(data);\r\n\r\n      };\r\n\r\n    // 2. Fetch Data from the API\r\n    useEffect(() => {\r\n        const fetchData = async () => {\r\n            try {\r\n                const token = getTokenFromCookie();\r\n    \r\n                const response = await axios.get(`http://192.168.14.248:8080/api/v1/package`, {\r\n                    headers: {\r\n                        Authorization: `Bearer ${token}`\r\n                    }\r\n                });\r\n    \r\n                // Check if the response status is not in the range of 200-299\r\n                if (response.status < 200 || response.status >= 300) {\r\n                    throw new Error(`HTTP error! Status: ${response.status}`);\r\n                }\r\n    \r\n                // Axios automatically parses the response for you\r\n                const data = response.data;\r\n    \r\n                // Assuming data is an array, set it to the state\r\n                setPackages(data);  \r\n            } catch (error) {\r\n                console.error('Error fetching data:', error);\r\n            }\r\n        };\r\n    \r\n        fetchData();\r\n    }, []);\r\n    return (\r\n        <>  \r\n\r\n            <div className=\"surface-ground px-4 py-8 md:px-6 lg:px-8\">\r\n                <div className=\"grid\">\r\n                    {packages.map((pkg) => (\r\n                        <div className=\"col-12 lg:col-4\" key={pkg.id}>\r\n                            <div className=\"p-3 h-full\">\r\n                                <div className=\"shadow-2 p-3 h-full flex flex-column surface-card\" style={{ borderRadius: '6px' }}>\r\n                                    <div className=\"text-900 font-medium text-xl mb-2\">{pkg.name}</div>\r\n                                    <div className=\"text-600\">Plan description</div>\r\n                                    <hr className=\"my-3 mx-0 border-top-1 border-none surface-border\" />\r\n                                    <div className=\"flex align-items-center\">\r\n                                        <span className=\"font-bold text-2xl text-900\">{pkg.price}</span>\r\n                                        <span className=\"ml-2 font-medium text-600\">per month</span>\r\n                                    </div>\r\n                                    <hr className=\"my-3 mx-0 border-top-1 border-none surface-border\" />\r\n                                    <ul className=\"list-none p-0 m-0 flex-grow-1\">\r\n                                        {Object.entries(pkg.description).map(([key, value]) => (\r\n                                            <li key={key} className=\"flex align-items-center mb-3\">\r\n                                                <i className=\"pi pi-check-circle text-green-500 mr-2\"></i>\r\n                                                <span>{key}: {value}</span>\r\n                                            </li>\r\n                                        ))}\r\n                                    </ul>\r\n                                    <hr className=\"mb-3 mx-0 border-top-1 border-none surface-border\" />\r\n                                    <Link href={`/subscribe/checkout?code=${pkg.code}`}>\r\n                                        <Button \r\n                                            label=\"Buy Now\" \r\n                                            className=\"p-3 w-full mt-auto\"\r\n                                            disabled={pkg.name === \"FREE\"} // Disable the button if the package name is \"FREE\"\r\n                                        />\r\n                                    </Link>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            </div>\r\n\r\n        </>\r\n    );\r\n};\r\n\r\nexport default BlocksDemo;\r\n"
        }
    ]
}