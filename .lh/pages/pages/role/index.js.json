{
    "sourceFile": "pages/pages/role/index.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 2,
            "patches": [
                {
                    "date": 1736922708378,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1736922722381,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -8,39 +8,39 @@\n import { Toolbar } from 'primereact/toolbar';\r\n import React, { useEffect, useRef, useState } from 'react';\r\n import withAuth from '../../../layout/context/withAuth';\r\n import { Dropdown } from 'primereact/dropdown'; \r\n-import { fetchUsers, createUser,updateExistingUser, bulkDeleteUsers } from './api'; // Pastikan jalur ini sesuai\r\n-import { deleteUser as deleteUserById } from './api';\r\n-import UserCreateDialog from './Dialogs/UserCreateDialog';  // Import komponen UserDialog\r\n-import UserUpdateDialog from './Dialogs/UserUpdateDialog';\r\n+import { fetchRoles, createRole,updateExistingRole, bulkDeleteRoles } from './api'; // Pastikan jalur ini sesuai\r\n+import { deleteRole as deleteRoleById } from './api';\r\n+import RoleCreateDialog from './Dialogs/RoleCreateDialog';  // Import komponen RoleDialog\r\n+import RoleUpdateDialog from './Dialogs/RoleUpdateDialog';\r\n import { Badge } from 'primereact/badge';\r\n \r\n const Inventory = () => {\r\n-    let emptyUser = {\r\n+    let emptyRole = {\r\n         id: null,\r\n         role :{\r\n             role: '',\r\n         },\r\n         status: 0,\r\n         description: ''\r\n     }; \r\n \r\n-    const [roles, setUsers] = useState(null);\r\n-    const [roleDialog, setUserDialog] = useState(false);\r\n-    const [roleUpdateDialog, setUserUpdateDialog] = useState(false);\r\n-    const [deleteUserDialog, setDeleteUserDialog] = useState(false);\r\n-    const [deleteUsersDialog, setDeleteUsersDialog] = useState(false);\r\n-    const [role, setUser] = useState(emptyUser);\r\n-    const [selectedUsers, setSelectedUsers] = useState(null);\r\n+    const [roles, setRoles] = useState(null);\r\n+    const [roleDialog, setRoleDialog] = useState(false);\r\n+    const [roleUpdateDialog, setRoleUpdateDialog] = useState(false);\r\n+    const [deleteRoleDialog, setDeleteRoleDialog] = useState(false);\r\n+    const [deleteRolesDialog, setDeleteRolesDialog] = useState(false);\r\n+    const [role, setRole] = useState(emptyRole);\r\n+    const [selectedRoles, setSelectedRoles] = useState(null);\r\n     const [submitted, setSubmitted] = useState(false);\r\n     const [globalFilter, setGlobalFilter] = useState(null);\r\n     const toast = useRef(null);\r\n     const dt = useRef(null);\r\n     const [rowsPerPage, setRowsPerPage] = useState(10); // Default 10\r\n \r\n-    const hideUserDialog = () => {\r\n-        setShowUserDialog(false);\r\n+    const hideRoleDialog = () => {\r\n+        setShowRoleDialog(false);\r\n     };\r\n     \r\n     const handleRowsPerPageChange = (newRowsPerPage) => {\r\n         setRowsPerPage(newRowsPerPage);\r\n@@ -58,10 +58,10 @@\n     \r\n     useEffect(() => {\r\n         const fetchData = async () => {\r\n             try {\r\n-                const response = await fetchUsers({ page: paginationData.page, limit: rowsPerPage,  totalPages: paginationData.totalPages});\r\n-                setUsers(Array.isArray(response.rows) ? response.rows : []);\r\n+                const response = await fetchRoles({ page: paginationData.page, limit: rowsPerPage,  totalPages: paginationData.totalPages});\r\n+                setRoles(Array.isArray(response.rows) ? response.rows : []);\r\n \r\n                 setPaginationData(prev => ({\r\n                     ...prev,\r\n                     totalPages: response.total_page,  // Ambil total halaman dari respons API\r\n@@ -80,79 +80,79 @@\n     }, [paginationData.page, rowsPerPage, paginationData.totalPages]); \r\n    \r\n \r\n     const openNew = () => {\r\n-        setUser(emptyUser);\r\n+        setRole(emptyRole);\r\n         setSubmitted(false);\r\n-        setUserDialog(true);\r\n+        setRoleDialog(true);\r\n     };\r\n \r\n     const openEdit = (roleData) => {\r\n-        setUser({ ...roleData });\r\n+        setRole({ ...roleData });\r\n         setSubmitted(false);\r\n-        setUserUpdateDialog(true);\r\n+        setRoleUpdateDialog(true);\r\n     };\r\n     \r\n \r\n     const hideDialog = () => {\r\n         setSubmitted(false);\r\n-        setUserDialog(false);\r\n+        setRoleDialog(false);\r\n     };\r\n \r\n     const hideUpdateDialog = () => {\r\n         setSubmitted(false);\r\n-        setUserUpdateDialog(false);\r\n+        setRoleUpdateDialog(false);\r\n     };\r\n \r\n-    const hideDeleteUserDialog = () => {\r\n-        setDeleteUserDialog(false);\r\n+    const hideDeleteRoleDialog = () => {\r\n+        setDeleteRoleDialog(false);\r\n     };\r\n \r\n-    const hideDeleteUsersDialog = () => {\r\n-        setDeleteUsersDialog(false);\r\n+    const hideDeleteRolesDialog = () => {\r\n+        setDeleteRolesDialog(false);\r\n     };\r\n \r\n-    const saveUser = () => {\r\n+    const saveRole = () => {\r\n         saveDataToApi();        \r\n     };\r\n \r\n     const saveDataToApi = async () => {\r\n         try { \r\n-            const response = await createUser(role);\r\n+            const response = await createRole(role);\r\n             toast.current.show({ severity: 'success', summary: 'Successful', detail: response.message, life: 3000 });\r\n         } catch (error) {\r\n             console.error(\"Error saving data:\", error);\r\n             toast.current.show({ severity: 'error', summary: 'Error', detail: error.response.data.meta.message, life: 3000 });\r\n         }\r\n     };\r\n \r\n-    const updateUser = () => {\r\n+    const updateRole = () => {\r\n         updateDataToApi();\r\n     };\r\n     \r\n     const updateDataToApi = async () => {\r\n         try { \r\n-            const response = await updateExistingUser(role); // Gantilah dengan fungsi update yang sesuai\r\n+            const response = await updateExistingRole(role); // Gantilah dengan fungsi update yang sesuai\r\n             toast.current.show({ severity: 'success', summary: 'Updated', detail: response.message, life: 3000 });\r\n         } catch (error) {\r\n             console.error(\"Error updating data:\", error);\r\n             toast.current.show({ severity: 'error', summary: 'Error', detail: error.response?.data?.meta?.message, life: 3000 });\r\n         }\r\n     };\r\n \r\n-    const confirmDeleteUser = (role) => {\r\n-        setUser(role);\r\n-        setDeleteUserDialog(true);\r\n+    const confirmDeleteRole = (role) => {\r\n+        setRole(role);\r\n+        setDeleteRoleDialog(true);\r\n     };\r\n     \r\n-    const deleteUser = async () => {\r\n+    const deleteRole = async () => {\r\n         try {\r\n-            await deleteUserById(role.id); // Use the renamed function to delete by id\r\n+            await deleteRoleById(role.id); // Use the renamed function to delete by id\r\n             const _roles = roles.filter((val) => val.id !== role.id);\r\n-            setUsers(_roles);\r\n-            setDeleteUserDialog(false);\r\n-            setUser(emptyUser);\r\n-            toast.current.show({ severity: 'success', summary: 'Successful', detail: 'User Deleted', life: 3000 });\r\n+            setRoles(_roles);\r\n+            setDeleteRoleDialog(false);\r\n+            setRole(emptyRole);\r\n+            toast.current.show({ severity: 'success', summary: 'Successful', detail: 'Role Deleted', life: 3000 });\r\n         } catch (error) {\r\n             console.error(\"Error deleting role:\", error);\r\n             toast.current.show({ severity: 'error', summary: 'Error', detail: 'Failed to delete role', life: 3000 });\r\n         }\r\n@@ -162,20 +162,20 @@\n         dt.current.exportCSV();\r\n     };\r\n \r\n     const confirmDeleteSelected = () => {\r\n-        setDeleteUsersDialog(true);\r\n+        setDeleteRolesDialog(true);\r\n     };\r\n \r\n-    const bulkDeleteSelectedUsers = async () => {\r\n+    const bulkDeleteSelectedRoles = async () => {\r\n         try {\r\n-            const selectedUserIds = selectedUsers.map((role) => role.id);\r\n-            await bulkDeleteUsers(selectedUserIds);\r\n-            const _roles = roles.filter((role) => !selectedUserIds.includes(role.id));\r\n-            setUsers(_roles);\r\n-            setDeleteUsersDialog(false);\r\n-            setSelectedUsers(null);\r\n-            toast.current.show({ severity: 'success', summary: 'Successful', detail: 'Users Deleted', life: 3000 });\r\n+            const selectedRoleIds = selectedRoles.map((role) => role.id);\r\n+            await bulkDeleteRoles(selectedRoleIds);\r\n+            const _roles = roles.filter((role) => !selectedRoleIds.includes(role.id));\r\n+            setRoles(_roles);\r\n+            setDeleteRolesDialog(false);\r\n+            setSelectedRoles(null);\r\n+            toast.current.show({ severity: 'success', summary: 'Successful', detail: 'Roles Deleted', life: 3000 });\r\n         } catch (error) {\r\n             console.error(\"Error deleting roles:\", error);\r\n             toast.current.show({ severity: 'error', summary: 'Error', detail: 'Failed to delete roles', life: 3000 });\r\n         }\r\n@@ -185,9 +185,9 @@\n         return (\r\n             <React.Fragment>\r\n                 <div className=\"my-2\">\r\n                     <Button label=\"New\" icon=\"pi pi-plus\" className=\"p-button-success mr-2\" onClick={openNew} />\r\n-                    <Button label=\"Bulk Delete\" icon=\"pi pi-trash\" className=\"p-button-danger mr-2\" onClick={confirmDeleteSelected} disabled={!selectedUsers || !selectedUsers.length} />\r\n+                    <Button label=\"Bulk Delete\" icon=\"pi pi-trash\" className=\"p-button-danger mr-2\" onClick={confirmDeleteSelected} disabled={!selectedRoles || !selectedRoles.length} />\r\n             </div>\r\n             </React.Fragment>\r\n         );\r\n     };\r\n@@ -254,33 +254,33 @@\n     const actionBodyTemplate = (rowData) => {\r\n         return (\r\n             <>\r\n                 <Button icon=\"pi pi-pencil\" className=\"p-button-rounded p-button-success mr-1\" onClick={() => openEdit (rowData)} />\r\n-                <Button icon=\"pi pi-trash\" className=\"p-button-rounded p-button-warning\" onClick={() => confirmDeleteUser(rowData)} />\r\n+                <Button icon=\"pi pi-trash\" className=\"p-button-rounded p-button-warning\" onClick={() => confirmDeleteRole(rowData)} />\r\n             </>\r\n         );\r\n     };\r\n \r\n     const header = (\r\n         <div className=\"flex flex-column md:flex-row md:justify-content-between md:align-items-center\">\r\n-            <h5 className=\"m-0\">Manage Users</h5>\r\n+            <h5 className=\"m-0\">Manage Roles</h5>\r\n             <span className=\"block mt-2 md:mt-0 p-input-icon-left\">\r\n                 <i className=\"pi pi-search\" />\r\n                 <InputText type=\"search\" onInput={(e) => setGlobalFilter(e.target.value)} placeholder=\"Search...\" />\r\n             </span>\r\n         </div>\r\n     );\r\n \r\n-    const deleteUserDialogFooter = (\r\n+    const deleteRoleDialogFooter = (\r\n         <>\r\n-            <Button label=\"No\" icon=\"pi pi-times\" className=\"p-button-text\" onClick={hideDeleteUserDialog} />\r\n-            <Button label=\"Yes\" icon=\"pi pi-check\" className=\"p-button-text\" onClick={deleteUser} />\r\n+            <Button label=\"No\" icon=\"pi pi-times\" className=\"p-button-text\" onClick={hideDeleteRoleDialog} />\r\n+            <Button label=\"Yes\" icon=\"pi pi-check\" className=\"p-button-text\" onClick={deleteRole} />\r\n         </>\r\n     );\r\n-    const deleteUsersDialogFooter = (\r\n+    const deleteRolesDialogFooter = (\r\n         <>\r\n-            <Button label=\"No\" icon=\"pi pi-times\" className=\"p-button-text\" onClick={hideDeleteUsersDialog} />\r\n-            <Button label=\"Yes\" icon=\"pi pi-check\" className=\"p-button-text\" onClick={bulkDeleteSelectedUsers} />\r\n+            <Button label=\"No\" icon=\"pi pi-times\" className=\"p-button-text\" onClick={hideDeleteRolesDialog} />\r\n+            <Button label=\"Yes\" icon=\"pi pi-check\" className=\"p-button-text\" onClick={bulkDeleteSelectedRoles} />\r\n \r\n         </>\r\n     );\r\n \r\n@@ -301,10 +301,10 @@\n \r\n                     <DataTable\r\n                        ref={dt}\r\n                        value={roles}\r\n-                       selection={selectedUsers}\r\n-                       onSelectionChange={(e) => setSelectedUsers(e.value)}\r\n+                       selection={selectedRoles}\r\n+                       onSelectionChange={(e) => setSelectedRoles(e.value)}\r\n                        dataKey=\"id\"\r\n                        className=\"datatable-responsive\"\r\n                        globalFilter={globalFilter}\r\n                        emptyMessage=\"No roles found.\"\r\n@@ -324,9 +324,9 @@\n                     <div className=\"flex justify-content-between align-items-center\">\r\n                         <Button icon=\"pi pi-angle-left\" className=\"p-button-text\" onClick={handlePreviousPage} disabled={paginationData.page === 1} />\r\n                         <span>{`Page ${paginationData.page} of ${paginationData.totalPages }`}</span>\r\n                         <Button icon=\"pi pi-angle-right\" className=\"p-button-text\" onClick={handleNextPage} disabled={paginationData.page === paginationData.totalPages} />\r\n-                        <span>{`Inventory ${paginationData.totalRows } Users`}</span>\r\n+                        <span>{`Inventory ${paginationData.totalRows } Roles`}</span>\r\n                     </div>\r\n                                 <Dropdown\r\n                         value={rowsPerPage}\r\n                         options={[10, 25, 50]} // Opsi untuk jumlah baris per halaman\r\n@@ -334,26 +334,26 @@\n                             placeholder=\"Rows per page\"\r\n                             className=\"ml-2\"\r\n                         />\r\n                 </div>              \r\n-                        <UserCreateDialog\r\n+                        <RoleCreateDialog\r\n                         visible={roleDialog}\r\n                         role={role}\r\n-                        setUser={setUser}\r\n+                        setRole={setRole}\r\n                         hideDialog={hideDialog}\r\n-                        saveUser={saveUser}\r\n+                        saveRole={saveRole}\r\n                         submitted={submitted}\r\n                         />\r\n-                         <UserUpdateDialog\r\n+                         <RoleUpdateDialog\r\n                             visible={roleUpdateDialog}\r\n                             role={role}\r\n-                            setUser={setUser}\r\n+                            setRole={setRole}\r\n                             hideDialog={hideUpdateDialog}\r\n-                            updateUser={updateUser}\r\n+                            updateRole={updateRole}\r\n                             submitted={submitted}\r\n                         />\r\n \r\n-                    <Dialog visible={deleteUserDialog} style={{ width: '450px' }} header=\"Confirm\" modal footer={deleteUserDialogFooter} onHide={hideDeleteUserDialog}>\r\n+                    <Dialog visible={deleteRoleDialog} style={{ width: '450px' }} header=\"Confirm\" modal footer={deleteRoleDialogFooter} onHide={hideDeleteRoleDialog}>\r\n                         <div className=\"flex align-items-center justify-content-center\">\r\n                             <i className=\"pi pi-exclamation-triangle mr-3\" style={{ fontSize: '2rem' }} />\r\n                             {role && (\r\n                                 <span>\r\n@@ -362,9 +362,9 @@\n                             )}\r\n                         </div>\r\n                     </Dialog>\r\n \r\n-                    <Dialog visible={deleteUsersDialog} style={{ width: '450px' }} header=\"Confirm\" modal footer={deleteUsersDialogFooter} onHide={hideDeleteUsersDialog}>\r\n+                    <Dialog visible={deleteRolesDialog} style={{ width: '450px' }} header=\"Confirm\" modal footer={deleteRolesDialogFooter} onHide={hideDeleteRolesDialog}>\r\n                         <div className=\"flex align-items-center justify-content-center\">\r\n                             <i className=\"pi pi-exclamation-triangle mr-3\" style={{ fontSize: '2rem' }} />\r\n                             {role && <span>Are you sure you want to delete the selected roles?</span>}\r\n                         </div>\r\n"
                },
                {
                    "date": 1736922896967,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -20,10 +20,8 @@\n         id: null,\r\n         role :{\r\n             role: '',\r\n         },\r\n-        status: 0,\r\n-        description: ''\r\n     }; \r\n \r\n     const [roles, setRoles] = useState(null);\r\n     const [roleDialog, setRoleDialog] = useState(false);\r\n@@ -224,21 +222,8 @@\n             </>\r\n         );\r\n     };\r\n \r\n-    const statusBodyTemplate = (rowData) => {\r\n-        return (\r\n-            <>\r\n-                <span className=\"p-column-title\">Status</span>\r\n-                <Badge\r\n-                    value={rowData.status === 1 ? 'Active' : 'Inactive'}\r\n-                    severity={rowData.status === 1 ? 'success' : 'danger'}\r\n-                    className=\"ml-2\"\r\n-                />\r\n-            </>\r\n-        );\r\n-    };  \r\n-\r\n     const handleNextPage = () => {\r\n         setPaginationData(prev => {\r\n             const nextPage = prev.page + 1;\r\n             return { ...prev, page: nextPage > prev.totalPages ? prev.totalPages : nextPage };\r\n@@ -315,9 +300,8 @@\n                         <Column field=\"nomor\" header=\"No\" body={nomorBodyTemplate} style={{ width: '5%' }} />\r\n \r\n                         <Column field=\"role\" header=\"Name\" sortable body={nameBodyTemplate} headerStyle={{ minWidth: '10rem' }}></Column>\r\n                         <Column field=\"created_by\" header=\"Created By\" sortable body={roleBodyTemplate}></Column>\r\n-                        <Column field=\"status\" header=\"Status\" body={statusBodyTemplate}></Column>\r\n                         <Column field=\"action\" body={actionBodyTemplate} ></Column>\r\n                     </DataTable>\r\n \r\n                     <div className=\"paginator-buttons\" style={{ display: 'flex', justifyContent: 'center', alignItems: 'center' }}>\r\n"
                }
            ],
            "date": 1736922708378,
            "name": "Commit-0",
            "content": "import { Button } from 'primereact/button';\r\nimport { Column } from 'primereact/column';\r\nimport { DataTable } from 'primereact/datatable';\r\nimport { Dialog } from 'primereact/dialog';\r\nimport { FileUpload } from 'primereact/fileupload';\r\nimport { InputText } from 'primereact/inputtext';\r\nimport { Toast } from 'primereact/toast';\r\nimport { Toolbar } from 'primereact/toolbar';\r\nimport React, { useEffect, useRef, useState } from 'react';\r\nimport withAuth from '../../../layout/context/withAuth';\r\nimport { Dropdown } from 'primereact/dropdown'; \r\nimport { fetchUsers, createUser,updateExistingUser, bulkDeleteUsers } from './api'; // Pastikan jalur ini sesuai\r\nimport { deleteUser as deleteUserById } from './api';\r\nimport UserCreateDialog from './Dialogs/UserCreateDialog';  // Import komponen UserDialog\r\nimport UserUpdateDialog from './Dialogs/UserUpdateDialog';\r\nimport { Badge } from 'primereact/badge';\r\n\r\nconst Inventory = () => {\r\n    let emptyUser = {\r\n        id: null,\r\n        role :{\r\n            role: '',\r\n        },\r\n        status: 0,\r\n        description: ''\r\n    }; \r\n\r\n    const [roles, setUsers] = useState(null);\r\n    const [roleDialog, setUserDialog] = useState(false);\r\n    const [roleUpdateDialog, setUserUpdateDialog] = useState(false);\r\n    const [deleteUserDialog, setDeleteUserDialog] = useState(false);\r\n    const [deleteUsersDialog, setDeleteUsersDialog] = useState(false);\r\n    const [role, setUser] = useState(emptyUser);\r\n    const [selectedUsers, setSelectedUsers] = useState(null);\r\n    const [submitted, setSubmitted] = useState(false);\r\n    const [globalFilter, setGlobalFilter] = useState(null);\r\n    const toast = useRef(null);\r\n    const dt = useRef(null);\r\n    const [rowsPerPage, setRowsPerPage] = useState(10); // Default 10\r\n\r\n    const hideUserDialog = () => {\r\n        setShowUserDialog(false);\r\n    };\r\n    \r\n    const handleRowsPerPageChange = (newRowsPerPage) => {\r\n        setRowsPerPage(newRowsPerPage);\r\n        setPaginationData(prev => ({ ...prev, limit: newRowsPerPage, page: 1 })); // Reset ke halaman 1 saat limit berubah\r\n    };\r\n    \r\n    const [paginationData, setPaginationData] = useState({\r\n        page: 1, // Start from page 1 as per your requirement\r\n        totaPages: 0,\r\n        limit: 10, // Default limit to 10\r\n        totalData: 0,\r\n        totalRows: 0,\r\n        nextPage: 0,\r\n    });\r\n    \r\n    useEffect(() => {\r\n        const fetchData = async () => {\r\n            try {\r\n                const response = await fetchUsers({ page: paginationData.page, limit: rowsPerPage,  totalPages: paginationData.totalPages});\r\n                setUsers(Array.isArray(response.rows) ? response.rows : []);\r\n\r\n                setPaginationData(prev => ({\r\n                    ...prev,\r\n                    totalPages: response.total_page,  // Ambil total halaman dari respons API\r\n                    totalData: response.total_data,\r\n                    totalRows: response.total_rows,\r\n                    nextPage: response.next_page\r\n                    \r\n                }));\r\n            } catch (error) {\r\n                console.error(\"Error fetching data:\", error);\r\n            }\r\n        };\r\n        fetchData();\r\n        console.log(\"Updated Pagination Data:\", paginationData);  // Log setiap kali paginationData berubah\r\n\r\n    }, [paginationData.page, rowsPerPage, paginationData.totalPages]); \r\n   \r\n\r\n    const openNew = () => {\r\n        setUser(emptyUser);\r\n        setSubmitted(false);\r\n        setUserDialog(true);\r\n    };\r\n\r\n    const openEdit = (roleData) => {\r\n        setUser({ ...roleData });\r\n        setSubmitted(false);\r\n        setUserUpdateDialog(true);\r\n    };\r\n    \r\n\r\n    const hideDialog = () => {\r\n        setSubmitted(false);\r\n        setUserDialog(false);\r\n    };\r\n\r\n    const hideUpdateDialog = () => {\r\n        setSubmitted(false);\r\n        setUserUpdateDialog(false);\r\n    };\r\n\r\n    const hideDeleteUserDialog = () => {\r\n        setDeleteUserDialog(false);\r\n    };\r\n\r\n    const hideDeleteUsersDialog = () => {\r\n        setDeleteUsersDialog(false);\r\n    };\r\n\r\n    const saveUser = () => {\r\n        saveDataToApi();        \r\n    };\r\n\r\n    const saveDataToApi = async () => {\r\n        try { \r\n            const response = await createUser(role);\r\n            toast.current.show({ severity: 'success', summary: 'Successful', detail: response.message, life: 3000 });\r\n        } catch (error) {\r\n            console.error(\"Error saving data:\", error);\r\n            toast.current.show({ severity: 'error', summary: 'Error', detail: error.response.data.meta.message, life: 3000 });\r\n        }\r\n    };\r\n\r\n    const updateUser = () => {\r\n        updateDataToApi();\r\n    };\r\n    \r\n    const updateDataToApi = async () => {\r\n        try { \r\n            const response = await updateExistingUser(role); // Gantilah dengan fungsi update yang sesuai\r\n            toast.current.show({ severity: 'success', summary: 'Updated', detail: response.message, life: 3000 });\r\n        } catch (error) {\r\n            console.error(\"Error updating data:\", error);\r\n            toast.current.show({ severity: 'error', summary: 'Error', detail: error.response?.data?.meta?.message, life: 3000 });\r\n        }\r\n    };\r\n\r\n    const confirmDeleteUser = (role) => {\r\n        setUser(role);\r\n        setDeleteUserDialog(true);\r\n    };\r\n    \r\n    const deleteUser = async () => {\r\n        try {\r\n            await deleteUserById(role.id); // Use the renamed function to delete by id\r\n            const _roles = roles.filter((val) => val.id !== role.id);\r\n            setUsers(_roles);\r\n            setDeleteUserDialog(false);\r\n            setUser(emptyUser);\r\n            toast.current.show({ severity: 'success', summary: 'Successful', detail: 'User Deleted', life: 3000 });\r\n        } catch (error) {\r\n            console.error(\"Error deleting role:\", error);\r\n            toast.current.show({ severity: 'error', summary: 'Error', detail: 'Failed to delete role', life: 3000 });\r\n        }\r\n    };\r\n    \r\n    const exportCSV = () => {\r\n        dt.current.exportCSV();\r\n    };\r\n\r\n    const confirmDeleteSelected = () => {\r\n        setDeleteUsersDialog(true);\r\n    };\r\n\r\n    const bulkDeleteSelectedUsers = async () => {\r\n        try {\r\n            const selectedUserIds = selectedUsers.map((role) => role.id);\r\n            await bulkDeleteUsers(selectedUserIds);\r\n            const _roles = roles.filter((role) => !selectedUserIds.includes(role.id));\r\n            setUsers(_roles);\r\n            setDeleteUsersDialog(false);\r\n            setSelectedUsers(null);\r\n            toast.current.show({ severity: 'success', summary: 'Successful', detail: 'Users Deleted', life: 3000 });\r\n        } catch (error) {\r\n            console.error(\"Error deleting roles:\", error);\r\n            toast.current.show({ severity: 'error', summary: 'Error', detail: 'Failed to delete roles', life: 3000 });\r\n        }\r\n    };    \r\n\r\n    const leftToolbarTemplate = () => {\r\n        return (\r\n            <React.Fragment>\r\n                <div className=\"my-2\">\r\n                    <Button label=\"New\" icon=\"pi pi-plus\" className=\"p-button-success mr-2\" onClick={openNew} />\r\n                    <Button label=\"Bulk Delete\" icon=\"pi pi-trash\" className=\"p-button-danger mr-2\" onClick={confirmDeleteSelected} disabled={!selectedUsers || !selectedUsers.length} />\r\n            </div>\r\n            </React.Fragment>\r\n        );\r\n    };\r\n\r\n    const rightToolbarTemplate = () => {\r\n        return (\r\n            <React.Fragment>\r\n                <FileUpload mode=\"basic\" accept=\"image/*\" maxFileSize={1000000} label=\"Import\" chooseLabel=\"Import\" className=\"mr-2 inline-block\" />\r\n                <Button label=\"Export\" icon=\"pi pi-upload\" className=\"p-button-help\" onClick={exportCSV} />\r\n            </React.Fragment>\r\n        );\r\n    };\r\n\r\n    const nameBodyTemplate = (rowData) => {\r\n        return (\r\n            <span\r\n            style={{\r\n                cursor: 'pointer',\r\n                color: 'blue',\r\n                \r\n            }}\r\n            onClick={() => openEdit(rowData)}\r\n        >\r\n            {rowData.full_name}\r\n        </span>\r\n        );\r\n    };\r\n\r\n    const roleBodyTemplate = (rowData) => {\r\n        return (\r\n            <>\r\n                <span className=\"p-column-title\">Created By</span>\r\n                {rowData.created_by}\r\n            </>\r\n        );\r\n    };\r\n\r\n    const statusBodyTemplate = (rowData) => {\r\n        return (\r\n            <>\r\n                <span className=\"p-column-title\">Status</span>\r\n                <Badge\r\n                    value={rowData.status === 1 ? 'Active' : 'Inactive'}\r\n                    severity={rowData.status === 1 ? 'success' : 'danger'}\r\n                    className=\"ml-2\"\r\n                />\r\n            </>\r\n        );\r\n    };  \r\n\r\n    const handleNextPage = () => {\r\n        setPaginationData(prev => {\r\n            const nextPage = prev.page + 1;\r\n            return { ...prev, page: nextPage > prev.totalPages ? prev.totalPages : nextPage };\r\n        });\r\n    };\r\n    const handlePreviousPage = () => {\r\n        setPaginationData(prev => {\r\n            const previousPage = prev.page - 1;\r\n            return { ...prev, page: previousPage < 1 ? 1 : previousPage };\r\n        });\r\n    };\r\n\r\n    const actionBodyTemplate = (rowData) => {\r\n        return (\r\n            <>\r\n                <Button icon=\"pi pi-pencil\" className=\"p-button-rounded p-button-success mr-1\" onClick={() => openEdit (rowData)} />\r\n                <Button icon=\"pi pi-trash\" className=\"p-button-rounded p-button-warning\" onClick={() => confirmDeleteUser(rowData)} />\r\n            </>\r\n        );\r\n    };\r\n\r\n    const header = (\r\n        <div className=\"flex flex-column md:flex-row md:justify-content-between md:align-items-center\">\r\n            <h5 className=\"m-0\">Manage Users</h5>\r\n            <span className=\"block mt-2 md:mt-0 p-input-icon-left\">\r\n                <i className=\"pi pi-search\" />\r\n                <InputText type=\"search\" onInput={(e) => setGlobalFilter(e.target.value)} placeholder=\"Search...\" />\r\n            </span>\r\n        </div>\r\n    );\r\n\r\n    const deleteUserDialogFooter = (\r\n        <>\r\n            <Button label=\"No\" icon=\"pi pi-times\" className=\"p-button-text\" onClick={hideDeleteUserDialog} />\r\n            <Button label=\"Yes\" icon=\"pi pi-check\" className=\"p-button-text\" onClick={deleteUser} />\r\n        </>\r\n    );\r\n    const deleteUsersDialogFooter = (\r\n        <>\r\n            <Button label=\"No\" icon=\"pi pi-times\" className=\"p-button-text\" onClick={hideDeleteUsersDialog} />\r\n            <Button label=\"Yes\" icon=\"pi pi-check\" className=\"p-button-text\" onClick={bulkDeleteSelectedUsers} />\r\n\r\n        </>\r\n    );\r\n\r\n    const nomorBodyTemplate = (_, { rowIndex }) => {\r\n        // Calculate the row number based on the current page and rows per page\r\n        const nomor = (paginationData.page - 1) * rowsPerPage + rowIndex + 1;\r\n        return (\r\n            <span>{nomor}</span>\r\n        );\r\n    };\r\n\r\n    return (\r\n        <div className=\"grid crud-demo\">\r\n            <div className=\"col-12\">\r\n                <div className=\"card\">\r\n                    <Toast ref={toast} />\r\n                    <Toolbar className=\"mb-4\" left={leftToolbarTemplate} right={rightToolbarTemplate}></Toolbar>\r\n\r\n                    <DataTable\r\n                       ref={dt}\r\n                       value={roles}\r\n                       selection={selectedUsers}\r\n                       onSelectionChange={(e) => setSelectedUsers(e.value)}\r\n                       dataKey=\"id\"\r\n                       className=\"datatable-responsive\"\r\n                       globalFilter={globalFilter}\r\n                       emptyMessage=\"No roles found.\"\r\n                       header={header}\r\n                       responsiveLayout=\"scroll\"                   \r\n                    >\r\n                        <Column selectionMode=\"multiple\" headerStyle={{ width: '4rem' }}></Column>\r\n                        <Column field=\"nomor\" header=\"No\" body={nomorBodyTemplate} style={{ width: '5%' }} />\r\n\r\n                        <Column field=\"role\" header=\"Name\" sortable body={nameBodyTemplate} headerStyle={{ minWidth: '10rem' }}></Column>\r\n                        <Column field=\"created_by\" header=\"Created By\" sortable body={roleBodyTemplate}></Column>\r\n                        <Column field=\"status\" header=\"Status\" body={statusBodyTemplate}></Column>\r\n                        <Column field=\"action\" body={actionBodyTemplate} ></Column>\r\n                    </DataTable>\r\n\r\n                    <div className=\"paginator-buttons\" style={{ display: 'flex', justifyContent: 'center', alignItems: 'center' }}>\r\n                    <div className=\"flex justify-content-between align-items-center\">\r\n                        <Button icon=\"pi pi-angle-left\" className=\"p-button-text\" onClick={handlePreviousPage} disabled={paginationData.page === 1} />\r\n                        <span>{`Page ${paginationData.page} of ${paginationData.totalPages }`}</span>\r\n                        <Button icon=\"pi pi-angle-right\" className=\"p-button-text\" onClick={handleNextPage} disabled={paginationData.page === paginationData.totalPages} />\r\n                        <span>{`Inventory ${paginationData.totalRows } Users`}</span>\r\n                    </div>\r\n                                <Dropdown\r\n                        value={rowsPerPage}\r\n                        options={[10, 25, 50]} // Opsi untuk jumlah baris per halaman\r\n                            onChange={(e) => handleRowsPerPageChange(e.value)} // Panggil fungsi ketika nilai dropdown diubah\r\n                            placeholder=\"Rows per page\"\r\n                            className=\"ml-2\"\r\n                        />\r\n                </div>              \r\n                        <UserCreateDialog\r\n                        visible={roleDialog}\r\n                        role={role}\r\n                        setUser={setUser}\r\n                        hideDialog={hideDialog}\r\n                        saveUser={saveUser}\r\n                        submitted={submitted}\r\n                        />\r\n                         <UserUpdateDialog\r\n                            visible={roleUpdateDialog}\r\n                            role={role}\r\n                            setUser={setUser}\r\n                            hideDialog={hideUpdateDialog}\r\n                            updateUser={updateUser}\r\n                            submitted={submitted}\r\n                        />\r\n\r\n                    <Dialog visible={deleteUserDialog} style={{ width: '450px' }} header=\"Confirm\" modal footer={deleteUserDialogFooter} onHide={hideDeleteUserDialog}>\r\n                        <div className=\"flex align-items-center justify-content-center\">\r\n                            <i className=\"pi pi-exclamation-triangle mr-3\" style={{ fontSize: '2rem' }} />\r\n                            {role && (\r\n                                <span>\r\n                                    Are you sure you want to delete <b>{role.role}</b>?\r\n                                </span>\r\n                            )}\r\n                        </div>\r\n                    </Dialog>\r\n\r\n                    <Dialog visible={deleteUsersDialog} style={{ width: '450px' }} header=\"Confirm\" modal footer={deleteUsersDialogFooter} onHide={hideDeleteUsersDialog}>\r\n                        <div className=\"flex align-items-center justify-content-center\">\r\n                            <i className=\"pi pi-exclamation-triangle mr-3\" style={{ fontSize: '2rem' }} />\r\n                            {role && <span>Are you sure you want to delete the selected roles?</span>}\r\n                        </div>\r\n                    </Dialog>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default withAuth(Inventory);\r\n"
        }
    ]
}